.vote-panel  
  - unless current_user.voting?(controller_name, object)
    Love this?
    = form_for(current_user.votes.build) do |f|
      = hidden_field_tag :type, controller_name
      = hidden_field_tag "#{object.class.name.downcase}_id", object.id
      = button_tag(type: "submit", class: "btn btn-primary btn-small" ) do
        %i.fa.fa-thumbs-o-up
        Vote
  - else
    You voted!
    = form_for(current_user.votes.where("#{object.class.name.downcase}_id = ?", object.id).first,
                 html: { method: :delete }) do |f|
      = hidden_field_tag :type, controller_name
      = button_tag(type: "submit", class: "btn btn-danger btn-small" ) do
        %i.fa.fa-thumbs-o-down
        Unvote